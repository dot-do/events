{"id":"events-0v8","title":"Schedule automated Parquet compaction","description":"Compaction functions exist (core/src/compaction.ts, cdc-compaction.ts) but no scheduled trigger. Small JSONL files accumulate indefinitely. Add cron trigger or CatalogDO alarm.","status":"open","priority":2,"issue_type":"feature","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:55:43.259387-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:55:43.259387-06:00"}
{"id":"events-1th","title":"Fix module-level mutable state in tail worker","description":"src/tail-worker.ts:26-27 - Module-level eventBuffer array lost on isolate eviction. Failed flush re-queues indefinitely (line 57-58). Send events to DO immediately instead of buffering at module level.","status":"open","priority":1,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:54:47.79476-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:54:47.79476-06:00"}
{"id":"events-39g","title":"Remove token preview from debug callback","description":"src/index.ts:202-213 - ?debug=true on /callback leaks 50 chars of access token. No special auth required. Fix: Remove tokenPreview or restrict to non-production.","status":"open","priority":0,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:54:36.930923-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:54:36.930923-06:00"}
{"id":"events-4bm","title":"Shard SubscriptionDO instead of singleton","description":"src/subscription-routes.ts:38 always uses idFromName('default'). All subscriptions, deliveries, dead letters hit one DO. At scale, serialization bottleneck. Use pattern-prefix-based sharding.","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:55:37.796321-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:55:37.796321-06:00"}
{"id":"events-50m","title":"Resolve DeltaRecord name collision in exports","description":"DeltaRecord exported from cdc-delta.ts (uses pk, data, prev, bookmark) and exists in cdc-compaction.ts (uses id, doc, ts: number, seq) with incompatible shapes. applyDeltasToState consumers may get wrong type.","status":"open","priority":2,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:55:33.07114-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:55:33.07114-06:00"}
{"id":"events-608","title":"Add input validation and auth flow tests for worker","description":"src/index.ts worker layer has zero test coverage. validateEvent(), validateBatch(), validateEventSize(), escapeSql() untested. Auth middleware untested. SQL query builder untested.\n\nTDD: RED: Test validateEvent with missing/invalid fields. RED: Test escapeSql with injection payloads. RED: Test /callback open redirect prevention. GREEN: Verify all pass.","status":"open","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:55:15.426307-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:55:15.426307-06:00"}
{"id":"events-6r3","title":"Fix SQL injection in CatalogDO buildQuery","description":"core/src/catalog.ts:465-497 - where and columns params injected directly into SQL from URL query params. Add parameterized query building or whitelist validation.\n\nTDD: RED: SQL injection payload in where/columns is rejected. GREEN: Implement validation.","status":"open","priority":0,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:54:38.415957-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:54:38.415957-06:00"}
{"id":"events-7bm","title":"Handle R2 list pagination in handleEventsQuery","description":"src/index.ts - R2.list({ prefix, limit: 200 }) never checks listed.truncated or fetches next page. Hour buckets with \u003e200 files silently drop events from query results.","status":"open","priority":1,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:55:23.468626-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:55:23.468626-06:00"}
{"id":"events-9al","title":"Extract duplicated code: ULID, webhook buffering, corsHeaders, AsyncBuffer","description":"ULID duplicated in 3 files (src/index.ts, src/event-writer.ts, core/src/subscription.ts). Webhook buffering duplicated verbatim in src/index.ts:271-332. corsHeaders duplicated. createAsyncBuffer duplicated in 3 core files.","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:55:30.508886-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:55:30.508886-06:00"}
{"id":"events-b6i","title":"Cap limit parameter in handleRecent","description":"src/index.ts:760 - No upper bound on limit param. User could request limit=999999, attempting to read unbounded files. Add Math.min(limit, 1000) as done in handleEventsQuery.","status":"open","priority":2,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:55:50.646575-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:55:50.646575-06:00"}
{"id":"events-b8z","title":"Authenticate tail worker endpoints","description":"src/tail-worker.ts:68-136 - /flush, /status, /stats endpoints have no authentication. /flush triggers DO write. If exposed via workers.dev, anyone can trigger flushes or inspect state.","status":"open","priority":1,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:54:49.81814-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:54:49.81814-06:00"}
{"id":"events-bkq","title":"Fix CDCProcessorDO: extend DurableObject base class","description":"core/src/cdc-processor.ts:140 - CDCProcessorDO is a plain class, not extending DurableObject. DurableObjectNamespace\u003cCDCProcessorDO\u003e requires the DO brand symbol. Breaks type-checking (src/index.ts:66).","status":"open","priority":0,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:55:00.784127-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:55:00.784127-06:00"}
{"id":"events-eqw","title":"Fix CDCProcessorDO to use SQLite instead of in-memory state","description":"core/src/cdc-processor.ts:144 - In-memory Maps shadow SQLite tables. On DO eviction, all state lost. Remove parallel Maps, use SQLite exclusively.","status":"open","priority":0,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:54:41.741419-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:54:41.741419-06:00"}
{"id":"events-fqk","title":"Fix benchmark-worker.ts type errors (17+)","description":"src/benchmark-worker.ts has 17+ type errors: missing @types/lz4 and @types/zstd-codec, ArrayBuffer/Uint8Array mismatches with hyparquet, property name mismatches (writeCpuMs vs writeMs).","status":"open","priority":2,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:55:46.208815-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:55:46.208815-06:00"}
{"id":"events-fv3","title":"Add runtime validation for request.json() in catalog/subscription handlers","description":"Multiple unsafe as casts on request.json() without runtime validation in catalog handlers (src/index.ts:1309,1323,1351) and subscription routes (src/subscription-routes.ts:61,87,205). Only /ingest validates properly.","status":"open","priority":1,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:55:07.183277-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:55:07.183277-06:00"}
{"id":"events-hsl","title":"Fix SharedArrayBuffer type error in cdc-snapshot.ts","description":"core/src/cdc-snapshot.ts:214 - Uint8Array.buffer returns ArrayBufferLike (includes SharedArrayBuffer) but R2 put() requires ArrayBuffer. Use JSON.stringify directly or new Uint8Array().","status":"open","priority":1,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:55:03.075614-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:55:03.075614-06:00"}
{"id":"events-jm3","title":"Unify on Parquet format for all ingestion paths","description":"/ingest writes JSONL, webhooks/tail write Parquet. Dual-format doubles read complexity in handleEventsQuery. Migrate /ingest to write Parquet through EventWriterDO.","status":"open","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:55:21.02812-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:55:21.02812-06:00"}
{"id":"events-jnu","title":"Connect CDC pipeline to ingestion flow","description":"CDC processor and subscription fanout are fully implemented but disconnected from ingestion. Events land in R2 as JSONL but nothing triggers CDCProcessorDO.process() or SubscriptionDO.fanout(). Enable Queue binding and wire up consumers.","status":"open","priority":1,"issue_type":"feature","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:54:52.412035-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:54:52.412035-06:00"}
{"id":"events-m9e","title":"Add CI/CD pipeline with GitHub Actions","description":"No .github/ directory exists. No CI pipeline configured. Tests never run on push/PR. Need: pnpm test on push/PR, typecheck, coverage thresholds (80% for core/), E2E on staging.","status":"open","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:55:08.787413-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:55:08.787413-06:00"}
{"id":"events-nio","title":"Add deduplication/idempotency to /ingest","description":"POST /ingest writes to R2 via ctx.waitUntil. If write succeeds but response is lost, client retries create duplicates. Add client-provided batch ID and dedup check.","status":"open","priority":1,"issue_type":"feature","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:54:55.123558-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:54:55.123558-06:00"}
{"id":"events-ovm","title":"Restrict CORS on authenticated endpoints","description":"src/index.ts:438-453 - All responses use Access-Control-Allow-Origin: *. Any website can make cross-origin requests to authenticated endpoints. Restrict to known origins for auth endpoints.","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:55:35.387065-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:55:35.387065-06:00"}
{"id":"events-p3d","title":"Persist EventWriterDO buffer to DO storage","description":"src/event-writer-do.ts - Buffer is in-memory only. DO eviction between ingest() and flush() loses all buffered events. Use ctx.storage.put() on ingest, ctx.storage.delete() after flush.","status":"open","priority":0,"issue_type":"bug","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:54:40.039284-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:54:40.039284-06:00"}
{"id":"events-rl8","title":"Add CatalogDO and SubscriptionDO tests","description":"CatalogDO (core/src/catalog.ts) and SubscriptionDO actual class (core/src/subscription.ts) have no tests. subscription.test.ts reimplements logic locally instead of testing the real DO.\n\nTDD: RED: Namespace CRUD, table creation, snapshot commits, query building. RED: Subscribe/unsubscribe/fanout via actual DO. GREEN: Verify pass.","status":"open","priority":1,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:55:18.297586-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:55:18.297586-06:00"}
{"id":"events-zx8","title":"Remove minify from core library tsup config","description":"core/tsup.config.ts:8 has minify: true. Minifying a library package makes debugging difficult for consumers. Stack traces will be mangled.","status":"open","priority":2,"issue_type":"task","owner":"4130910+nathanclevenger@users.noreply.github.com","created_at":"2026-02-01T15:55:48.147194-06:00","created_by":"Nathan Clevenger","updated_at":"2026-02-01T15:55:48.147194-06:00"}
