<!DOCTYPE html><html class="default" lang="en" data-base="."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@dotdo/events - v0.1.0</title><meta name="description" content="Documentation for @dotdo/events"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><script async src="assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"><a href="https://github.com/dot-do/events">GitHub</a><a href="https://events.do">Website</a></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@dotdo/events - v0.1.0</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>@dotdo/events - v0.1.0</h1></div><div class="tsd-panel tsd-typography"><a id="dotdoevents" class="tsd-anchor"></a><h1 class="tsd-anchor-link">@dotdo/events<a href="#dotdoevents" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>Event streaming, CDC (Change Data Capture), and lakehouse analytics for Cloudflare Durable Objects.</p>
<p><a href="https://www.npmjs.com/package/@dotdo/events"><img src="https://img.shields.io/npm/v/@dotdo/events.svg" alt="npm version"></a>
<a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-blue.svg" alt="License: MIT"></a></p>
<a id="installation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="bash"><span class="hl-6">pnpm</span><span class="hl-1"> </span><span class="hl-3">add</span><span class="hl-1"> </span><span class="hl-3">@dotdo/events</span>
</code><button type="button">Copy</button></pre>

<a id="quick-start" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Quick Start<a href="#quick-start" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="typescript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">EventEmitter</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@dotdo/events&#39;</span><br/><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-5">MyDO</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-5">DurableObject</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">events</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">EventEmitter</span><span class="hl-1">(</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">ctx</span><span class="hl-1">, </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">env</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-2">cdc:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">  })</span><br/><br/><span class="hl-1">  </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-6">doSomething</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-7">// Emit custom events</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">events</span><span class="hl-1">.</span><span class="hl-6">emit</span><span class="hl-1">({ </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;user.action&#39;</span><span class="hl-1">, </span><span class="hl-2">userId:</span><span class="hl-1"> </span><span class="hl-3">&#39;123&#39;</span><span class="hl-1">, </span><span class="hl-2">action:</span><span class="hl-1"> </span><span class="hl-3">&#39;click&#39;</span><span class="hl-1"> })</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// Required: forward alarm to EventEmitter for retry handling</span><br/><span class="hl-1">  </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-6">alarm</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">events</span><span class="hl-1">.</span><span class="hl-6">handleAlarm</span><span class="hl-1">()</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="features" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Features<a href="#features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><strong>Event batching and streaming</strong> - Batched emission to <a href="https://events.do">events.do</a> with configurable batch size and flush intervals</li>
<li><strong>CDC (Change Data Capture)</strong> - Automatic change events for collection mutations with SQLite bookmarks for PITR (Point-in-Time Recovery)</li>
<li><strong>R2 lakehouse storage</strong> - Stream events to R2 in Parquet-friendly JSON Lines format organized by time partitions</li>
<li><strong>DuckDB query generation</strong> - Built-in query builders for analytics, time-travel, and latency analysis</li>
<li><strong>Alarm-based retry</strong> - Reliable delivery with exponential backoff using DO alarms</li>
<li><strong>Hibernation support</strong> - Persist and restore event batches across hibernation cycles</li>
</ul>
<a id="api-reference" class="tsd-anchor"></a><h2 class="tsd-anchor-link">API Reference<a href="#api-reference" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="eventemitter-1" class="tsd-anchor"></a><h3 class="tsd-anchor-link">EventEmitter<a href="#eventemitter-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The core class for emitting events from Durable Objects.</p>
<pre><code class="typescript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">EventEmitter</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@dotdo/events&#39;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">events</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">EventEmitter</span><span class="hl-1">(</span><span class="hl-2">ctx</span><span class="hl-1">, </span><span class="hl-2">env</span><span class="hl-1">, </span><span class="hl-2">options</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="constructor" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Constructor<a href="#constructor" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">EventEmitter</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-2">ctx</span><span class="hl-1">: </span><span class="hl-2">DurableObjectState</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">env</span><span class="hl-1">: </span><span class="hl-2">Record</span><span class="hl-1">&lt;</span><span class="hl-2">string</span><span class="hl-1">, </span><span class="hl-2">unknown</span><span class="hl-1">&gt;,</span><br/><span class="hl-1">  </span><span class="hl-2">options</span><span class="hl-1">?: </span><span class="hl-2">EventEmitterOptions</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="methods" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Methods<a href="#methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>emit(event)</code></td>
<td>Emit a custom event (batched, non-blocking)</td>
</tr>
<tr>
<td><code>emitChange(type, collection, docId, doc?, prev?)</code></td>
<td>Emit a CDC event for collection changes</td>
</tr>
<tr>
<td><code>flush()</code></td>
<td>Manually flush pending events to endpoint</td>
</tr>
<tr>
<td><code>handleAlarm()</code></td>
<td>Handle alarm for retry - call from your DO's <code>alarm()</code> method</td>
</tr>
<tr>
<td><code>enrichFromRequest(request)</code></td>
<td>Enrich event identity from incoming request (colo, worker, etc.)</td>
</tr>
<tr>
<td><code>persistBatch()</code></td>
<td>Persist pending batch before hibernation</td>
</tr>
</tbody>
</table>
<a id="properties" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Properties<a href="#properties" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>pendingCount</code></td>
<td><code>number</code></td>
<td>Number of events in current batch</td>
</tr>
<tr>
<td><code>doIdentity</code></td>
<td><code>object</code></td>
<td>Current DO identity info</td>
</tr>
</tbody>
</table>
<a id="example" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Example<a href="#example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-5">ChatRoom</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-5">DurableObject</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">events</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">EventEmitter</span><span class="hl-1">(</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">ctx</span><span class="hl-1">, </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">env</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-2">cdc:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">trackPrevious:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">r2Bucket:</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">env</span><span class="hl-1">.</span><span class="hl-8">EVENTS_BUCKET</span><span class="hl-1">,</span><br/><span class="hl-1">  })</span><br/><br/><span class="hl-1">  </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-6">fetch</span><span class="hl-1">(</span><span class="hl-2">request</span><span class="hl-1">: </span><span class="hl-5">Request</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-7">// Enrich events with request context</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">events</span><span class="hl-1">.</span><span class="hl-6">enrichFromRequest</span><span class="hl-1">(</span><span class="hl-2">request</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-7">// ... handle request</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-6">sendMessage</span><span class="hl-1">(</span><span class="hl-2">userId</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">, </span><span class="hl-2">text</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">events</span><span class="hl-1">.</span><span class="hl-6">emit</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;message.sent&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">userId</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">textLength:</span><span class="hl-1"> </span><span class="hl-2">text</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">roomId:</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">ctx</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">.</span><span class="hl-6">toString</span><span class="hl-1">(),</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-6">alarm</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">events</span><span class="hl-1">.</span><span class="hl-6">handleAlarm</span><span class="hl-1">()</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-6">webSocketClose</span><span class="hl-1">(</span><span class="hl-2">ws</span><span class="hl-1">: </span><span class="hl-5">WebSocket</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-7">// Persist events before hibernation</span><br/><span class="hl-1">    </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">events</span><span class="hl-1">.</span><span class="hl-6">persistBatch</span><span class="hl-1">()</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="cdccollection-1" class="tsd-anchor"></a><h3 class="tsd-anchor-link">CDCCollection<a href="#cdccollection-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Wraps a collection with automatic CDC event emission for all mutations.</p>
<pre><code class="typescript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">CDCCollection</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@dotdo/events&#39;</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">users</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">CDCCollection</span><span class="hl-1">&lt;</span><span class="hl-5">User</span><span class="hl-1">&gt;(</span><br/><span class="hl-1">  </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-6">collection</span><span class="hl-1">&lt;</span><span class="hl-5">User</span><span class="hl-1">&gt;(</span><span class="hl-3">&#39;users&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">events</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">&#39;users&#39;</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="constructor-1" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Constructor<a href="#constructor-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">CDCCollection</span><span class="hl-1">&lt;</span><span class="hl-5">T</span><span class="hl-1">&gt;(</span><br/><span class="hl-1">  </span><span class="hl-2">collection</span><span class="hl-1">: </span><span class="hl-2">Collection</span><span class="hl-1">&lt;</span><span class="hl-8">T</span><span class="hl-1">&gt;,</span><br/><span class="hl-1">  </span><span class="hl-2">emitter</span><span class="hl-1">: </span><span class="hl-2">EventEmitter</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">name</span><span class="hl-1">: </span><span class="hl-2">string</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="methods-1" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Methods<a href="#methods-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
<th>Emits Event</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>get(id)</code></td>
<td>Get document by ID</td>
<td>No</td>
</tr>
<tr>
<td><code>put(id, doc)</code></td>
<td>Insert or update document</td>
<td><code>collection.insert</code> or <code>collection.update</code></td>
</tr>
<tr>
<td><code>delete(id)</code></td>
<td>Delete document</td>
<td><code>collection.delete</code></td>
</tr>
<tr>
<td><code>has(id)</code></td>
<td>Check if document exists</td>
<td>No</td>
</tr>
<tr>
<td><code>find(filter?, options?)</code></td>
<td>Find documents matching filter</td>
<td>No</td>
</tr>
<tr>
<td><code>count(filter?)</code></td>
<td>Count documents</td>
<td>No</td>
</tr>
<tr>
<td><code>list(options?)</code></td>
<td>List all documents</td>
<td>No</td>
</tr>
<tr>
<td><code>keys()</code></td>
<td>Get all document IDs</td>
<td>No</td>
</tr>
<tr>
<td><code>clear()</code></td>
<td>Delete all documents</td>
<td><code>collection.delete</code> for each</td>
</tr>
<tr>
<td><code>putMany(docs)</code></td>
<td>Bulk insert/update</td>
<td>Event per document</td>
</tr>
<tr>
<td><code>deleteMany(ids)</code></td>
<td>Bulk delete</td>
<td>Event per document</td>
</tr>
</tbody>
</table>
<a id="example-1" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Example<a href="#example-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-5">UserService</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-5">DurableRPC</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">events</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">EventEmitter</span><span class="hl-1">(</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">ctx</span><span class="hl-1">, </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">env</span><span class="hl-1">, { </span><span class="hl-2">cdc:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">, </span><span class="hl-2">trackPrevious:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1"> })</span><br/><span class="hl-1">  </span><span class="hl-2">users</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">CDCCollection</span><span class="hl-1">&lt;</span><span class="hl-5">User</span><span class="hl-1">&gt;(</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-6">collection</span><span class="hl-1">&lt;</span><span class="hl-5">User</span><span class="hl-1">&gt;(</span><span class="hl-3">&#39;users&#39;</span><span class="hl-1">), </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">events</span><span class="hl-1">, </span><span class="hl-3">&#39;users&#39;</span><span class="hl-1">)</span><br/><br/><span class="hl-1">  </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-6">createUser</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">: { </span><span class="hl-2">name</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">; </span><span class="hl-2">email</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1"> }) {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">id</span><span class="hl-1"> = </span><span class="hl-2">crypto</span><span class="hl-1">.</span><span class="hl-6">randomUUID</span><span class="hl-1">()</span><br/><span class="hl-1">    </span><span class="hl-7">// Automatically emits collection.insert event</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">users</span><span class="hl-1">.</span><span class="hl-6">put</span><span class="hl-1">(</span><span class="hl-2">id</span><span class="hl-1">, {</span><br/><span class="hl-1">      </span><span class="hl-2">name:</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">email:</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">email</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">createdAt:</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">Date</span><span class="hl-1">().</span><span class="hl-6">toISOString</span><span class="hl-1">(),</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">id</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-6">updateUser</span><span class="hl-1">(</span><span class="hl-2">id</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">, </span><span class="hl-2">updates</span><span class="hl-1">: </span><span class="hl-5">Partial</span><span class="hl-1">&lt;</span><span class="hl-5">User</span><span class="hl-1">&gt;) {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">user</span><span class="hl-1"> = </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">users</span><span class="hl-1">.</span><span class="hl-6">get</span><span class="hl-1">(</span><span class="hl-2">id</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-2">user</span><span class="hl-1">) </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">null</span><br/><span class="hl-1">    </span><span class="hl-7">// Automatically emits collection.update with prev doc</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">users</span><span class="hl-1">.</span><span class="hl-6">put</span><span class="hl-1">(</span><span class="hl-2">id</span><span class="hl-1">, { ...</span><span class="hl-2">user</span><span class="hl-1">, ...</span><span class="hl-2">updates</span><span class="hl-1"> })</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> { ...</span><span class="hl-2">user</span><span class="hl-1">, ...</span><span class="hl-2">updates</span><span class="hl-1"> }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="event-types" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Event Types<a href="#event-types" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-0">type</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">DurableEvent</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">BaseEvent</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">RpcCallEvent</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">CollectionChangeEvent</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">LifecycleEvent</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">WebSocketEvent</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">ClientEvent</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@dotdo/events&#39;</span>
</code><button type="button">Copy</button></pre>

<a id="durableevent-union-type" class="tsd-anchor"></a><h4 class="tsd-anchor-link">DurableEvent (Union Type)<a href="#durableevent-union-type" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>All events extend <code>BaseEvent</code> and include:</p>
<pre><code class="typescript"><span class="hl-4">interface</span><span class="hl-1"> </span><span class="hl-5">BaseEvent</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">type</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">        </span><span class="hl-7">// Event type identifier</span><br/><span class="hl-1">  </span><span class="hl-2">ts</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">          </span><span class="hl-7">// ISO timestamp</span><br/><span class="hl-1">  </span><span class="hl-2">do</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-2">id</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">        </span><span class="hl-7">// DO ID</span><br/><span class="hl-1">    </span><span class="hl-2">name</span><span class="hl-1">?: </span><span class="hl-5">string</span><span class="hl-1">     </span><span class="hl-7">// DO name (if named)</span><br/><span class="hl-1">    </span><span class="hl-2">class</span><span class="hl-1">?: </span><span class="hl-5">string</span><span class="hl-1">    </span><span class="hl-7">// DO class name</span><br/><span class="hl-1">    </span><span class="hl-2">colo</span><span class="hl-1">?: </span><span class="hl-5">string</span><span class="hl-1">     </span><span class="hl-7">// Cloudflare colo</span><br/><span class="hl-1">    </span><span class="hl-2">worker</span><span class="hl-1">?: </span><span class="hl-5">string</span><span class="hl-1">   </span><span class="hl-7">// Worker name</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="event-type-reference" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Event Type Reference<a href="#event-type-reference" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
<th>Additional Fields</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>RpcCallEvent</code></td>
<td>RPC method call</td>
<td><code>method</code>, <code>namespace</code>, <code>durationMs</code>, <code>success</code>, <code>error</code></td>
</tr>
<tr>
<td><code>CollectionChangeEvent</code></td>
<td>CDC mutation</td>
<td><code>collection</code>, <code>docId</code>, <code>doc</code>, <code>prev</code>, <code>bookmark</code></td>
</tr>
<tr>
<td><code>LifecycleEvent</code></td>
<td>DO lifecycle</td>
<td><code>reason</code></td>
</tr>
<tr>
<td><code>WebSocketEvent</code></td>
<td>WebSocket activity</td>
<td><code>connectionCount</code>, <code>code</code>, <code>reason</code></td>
</tr>
<tr>
<td><code>ClientEvent</code></td>
<td>Browser analytics</td>
<td><code>event</code>, <code>properties</code>, <code>traits</code>, <code>userId</code>, <code>anonymousId</code></td>
</tr>
</tbody>
</table>
<a id="query-builders" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Query Builders<a href="#query-builders" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Generate DuckDB queries for analyzing events stored in R2.</p>
<pre><code class="typescript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">buildQuery</span><span class="hl-1">, </span><span class="hl-2">buildHistoryQuery</span><span class="hl-1">, </span><span class="hl-2">buildLatencyQuery</span><span class="hl-1">, </span><span class="hl-2">buildPITRRangeQuery</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@dotdo/events&#39;</span>
</code><button type="button">Copy</button></pre>

<a id="buildqueryoptions" class="tsd-anchor"></a><h4 class="tsd-anchor-link">buildQuery(options)<a href="#buildqueryoptions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Build a general-purpose query for events.</p>
<pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">sql</span><span class="hl-1"> = </span><span class="hl-6">buildQuery</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">bucket:</span><span class="hl-1"> </span><span class="hl-3">&#39;my-events&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">dateRange:</span><span class="hl-1"> { </span><span class="hl-2">start:</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">Date</span><span class="hl-1">(</span><span class="hl-3">&#39;2024-01-01&#39;</span><span class="hl-1">), </span><span class="hl-2">end:</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">Date</span><span class="hl-1">(</span><span class="hl-3">&#39;2024-01-31&#39;</span><span class="hl-1">) },</span><br/><span class="hl-1">  </span><span class="hl-2">eventTypes:</span><span class="hl-1"> [</span><span class="hl-3">&#39;rpc.call&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">  </span><span class="hl-2">doClass:</span><span class="hl-1"> </span><span class="hl-3">&#39;ChatRoom&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">limit:</span><span class="hl-1"> </span><span class="hl-9">1000</span><span class="hl-1">,</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

<a id="buildhistoryqueryoptions" class="tsd-anchor"></a><h4 class="tsd-anchor-link">buildHistoryQuery(options)<a href="#buildhistoryqueryoptions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Reconstruct document history for time-travel queries.</p>
<pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">sql</span><span class="hl-1"> = </span><span class="hl-6">buildHistoryQuery</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">bucket:</span><span class="hl-1"> </span><span class="hl-3">&#39;my-events&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">collection:</span><span class="hl-1"> </span><span class="hl-3">&#39;users&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">docId:</span><span class="hl-1"> </span><span class="hl-3">&#39;user-123&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

<a id="buildlatencyqueryoptions" class="tsd-anchor"></a><h4 class="tsd-anchor-link">buildLatencyQuery(options)<a href="#buildlatencyqueryoptions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Analyze RPC latency with percentiles.</p>
<pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">sql</span><span class="hl-1"> = </span><span class="hl-6">buildLatencyQuery</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">bucket:</span><span class="hl-1"> </span><span class="hl-3">&#39;my-events&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">doClass:</span><span class="hl-1"> </span><span class="hl-3">&#39;ChatRoom&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">method:</span><span class="hl-1"> </span><span class="hl-3">&#39;sendMessage&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">})</span><br/><span class="hl-7">// Returns p50, p95, p99, avg, max latency grouped by class and method</span>
</code><button type="button">Copy</button></pre>

<a id="buildpitrrangequeryoptions" class="tsd-anchor"></a><h4 class="tsd-anchor-link">buildPITRRangeQuery(options)<a href="#buildpitrrangequeryoptions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Find events between two SQLite bookmarks for point-in-time recovery.</p>
<pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">sql</span><span class="hl-1"> = </span><span class="hl-6">buildPITRRangeQuery</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">bucket:</span><span class="hl-1"> </span><span class="hl-3">&#39;my-events&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">startBookmark:</span><span class="hl-1"> </span><span class="hl-3">&#39;bookmark-abc&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">endBookmark:</span><span class="hl-1"> </span><span class="hl-3">&#39;bookmark-xyz&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">collection:</span><span class="hl-1"> </span><span class="hl-3">&#39;users&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

<a id="snapshot-utilities" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Snapshot Utilities<a href="#snapshot-utilities" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Create and restore point-in-time snapshots of collections.</p>
<pre><code class="typescript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">createSnapshot</span><span class="hl-1">, </span><span class="hl-2">restoreSnapshot</span><span class="hl-1">, </span><span class="hl-2">listSnapshots</span><span class="hl-1">, </span><span class="hl-2">deleteSnapshot</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@dotdo/events&#39;</span>
</code><button type="button">Copy</button></pre>

<a id="createsnapshotsql-doid-options" class="tsd-anchor"></a><h4 class="tsd-anchor-link">createSnapshot(sql, doId, options)<a href="#createsnapshotsql-doid-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">result</span><span class="hl-1"> = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-6">createSnapshot</span><span class="hl-1">(</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">sql</span><span class="hl-1">, </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">ctx</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">.</span><span class="hl-6">toString</span><span class="hl-1">(), {</span><br/><span class="hl-1">  </span><span class="hl-2">bucket:</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">env</span><span class="hl-1">.</span><span class="hl-8">SNAPSHOTS_BUCKET</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">prefix:</span><span class="hl-1"> </span><span class="hl-3">&#39;snapshots&#39;</span><span class="hl-1">, </span><span class="hl-7">// optional</span><br/><span class="hl-1">})</span><br/><span class="hl-7">// { key: &#39;snapshots/abc123/2024-01-15T12-34-56-789Z.json&#39;, collections: [&#39;users&#39;], totalDocs: 42, timestamp: &#39;...&#39; }</span>
</code><button type="button">Copy</button></pre>

<a id="restoresnapshotsql-bucket-snapshotkey" class="tsd-anchor"></a><h4 class="tsd-anchor-link">restoreSnapshot(sql, bucket, snapshotKey)<a href="#restoresnapshotsql-bucket-snapshotkey" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">result</span><span class="hl-1"> = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-6">restoreSnapshot</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">sql</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">env</span><span class="hl-1">.</span><span class="hl-8">SNAPSHOTS_BUCKET</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">&#39;snapshots/abc123/2024-01-15T12-34-56-789Z.json&#39;</span><br/><span class="hl-1">)</span><br/><span class="hl-7">// { collections: [&#39;users&#39;], totalDocs: 42 }</span>
</code><button type="button">Copy</button></pre>

<a id="listsnapshotsbucket-doid-options" class="tsd-anchor"></a><h4 class="tsd-anchor-link">listSnapshots(bucket, doId, options?)<a href="#listsnapshotsbucket-doid-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">snapshots</span><span class="hl-1"> = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-6">listSnapshots</span><span class="hl-1">(</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">env</span><span class="hl-1">.</span><span class="hl-8">SNAPSHOTS_BUCKET</span><span class="hl-1">, </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">ctx</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1">.</span><span class="hl-6">toString</span><span class="hl-1">(), {</span><br/><span class="hl-1">  </span><span class="hl-2">limit:</span><span class="hl-1"> </span><span class="hl-9">10</span><span class="hl-1">,</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

<a id="deletesnapshotbucket-snapshotkey" class="tsd-anchor"></a><h4 class="tsd-anchor-link">deleteSnapshot(bucket, snapshotKey)<a href="#deletesnapshotbucket-snapshotkey" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-6">deleteSnapshot</span><span class="hl-1">(</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">env</span><span class="hl-1">.</span><span class="hl-8">SNAPSHOTS_BUCKET</span><span class="hl-1">, </span><span class="hl-3">&#39;snapshots/abc123/2024-01-15T12-34-56-789Z.json&#39;</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="configuration-options" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Configuration Options<a href="#configuration-options" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="typescript"><span class="hl-4">interface</span><span class="hl-1"> </span><span class="hl-5">EventEmitterOptions</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">/** Endpoint to send events (default: &#39;https://events.do/ingest&#39;) */</span><br/><span class="hl-1">  </span><span class="hl-2">endpoint</span><span class="hl-1">?: </span><span class="hl-5">string</span><br/><br/><span class="hl-1">  </span><span class="hl-7">/** Batch size before auto-flush (default: 100) */</span><br/><span class="hl-1">  </span><span class="hl-2">batchSize</span><span class="hl-1">?: </span><span class="hl-5">number</span><br/><br/><span class="hl-1">  </span><span class="hl-7">/** Max time to hold events before flush in ms (default: 1000) */</span><br/><span class="hl-1">  </span><span class="hl-2">flushIntervalMs</span><span class="hl-1">?: </span><span class="hl-5">number</span><br/><br/><span class="hl-1">  </span><span class="hl-7">/** Enable CDC for collections (default: false) */</span><br/><span class="hl-1">  </span><span class="hl-2">cdc</span><span class="hl-1">?: </span><span class="hl-5">boolean</span><br/><br/><span class="hl-1">  </span><span class="hl-7">/** Include previous doc in CDC updates for diffs (default: false) */</span><br/><span class="hl-1">  </span><span class="hl-2">trackPrevious</span><span class="hl-1">?: </span><span class="hl-5">boolean</span><br/><br/><span class="hl-1">  </span><span class="hl-7">/** R2 bucket for lakehouse streaming (optional) */</span><br/><span class="hl-1">  </span><span class="hl-2">r2Bucket</span><span class="hl-1">?: </span><span class="hl-5">R2Bucket</span><br/><br/><span class="hl-1">  </span><span class="hl-7">/** API key for authentication (optional) */</span><br/><span class="hl-1">  </span><span class="hl-2">apiKey</span><span class="hl-1">?: </span><span class="hl-5">string</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="integration-with-dotdorpc" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Integration with @dotdo/rpc<a href="#integration-with-dotdorpc" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>When using <code>@dotdo/rpc</code>, events integrate seamlessly with the DurableRPC base class:</p>
<pre><code class="typescript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">DurableRPC</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@dotdo/rpc&#39;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">EventEmitter</span><span class="hl-1">, </span><span class="hl-2">CDCCollection</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;@dotdo/events&#39;</span><br/><br/><span class="hl-4">interface</span><span class="hl-1"> </span><span class="hl-5">User</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">name</span><span class="hl-1">: </span><span class="hl-5">string</span><br/><span class="hl-1">  </span><span class="hl-2">email</span><span class="hl-1">: </span><span class="hl-5">string</span><br/><span class="hl-1">  </span><span class="hl-2">role</span><span class="hl-1">: </span><span class="hl-3">&#39;admin&#39;</span><span class="hl-1"> | </span><span class="hl-3">&#39;user&#39;</span><br/><span class="hl-1">  </span><span class="hl-2">active</span><span class="hl-1">: </span><span class="hl-5">boolean</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">interface</span><span class="hl-1"> </span><span class="hl-5">Env</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">EVENTS_BUCKET</span><span class="hl-1">?: </span><span class="hl-5">R2Bucket</span><br/><span class="hl-1">  </span><span class="hl-2">EVENTS_API_KEY</span><span class="hl-1">?: </span><span class="hl-5">string</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-5">MyDO</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-5">DurableRPC</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">// Create event emitter with CDC enabled</span><br/><span class="hl-1">  </span><span class="hl-2">events</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">EventEmitter</span><span class="hl-1">(</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">ctx</span><span class="hl-1">, </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">env</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-5">Env</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-2">cdc:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">trackPrevious:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">r2Bucket:</span><span class="hl-1"> (</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">env</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-5">Env</span><span class="hl-1">).</span><span class="hl-8">EVENTS_BUCKET</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">apiKey:</span><span class="hl-1"> (</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">env</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-5">Env</span><span class="hl-1">).</span><span class="hl-8">EVENTS_API_KEY</span><span class="hl-1">,</span><br/><span class="hl-1">  })</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// Wrap collections with CDC</span><br/><span class="hl-1">  </span><span class="hl-2">users</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">CDCCollection</span><span class="hl-1">&lt;</span><span class="hl-5">User</span><span class="hl-1">&gt;(</span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-6">collection</span><span class="hl-1">&lt;</span><span class="hl-5">User</span><span class="hl-1">&gt;(</span><span class="hl-3">&#39;users&#39;</span><span class="hl-1">), </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">events</span><span class="hl-1">, </span><span class="hl-3">&#39;users&#39;</span><span class="hl-1">)</span><br/><br/><span class="hl-1">  </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-6">createUser</span><span class="hl-1">(</span><span class="hl-2">data</span><span class="hl-1">: { </span><span class="hl-2">name</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">; </span><span class="hl-2">email</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">; </span><span class="hl-2">role</span><span class="hl-1">?: </span><span class="hl-3">&#39;admin&#39;</span><span class="hl-1"> | </span><span class="hl-3">&#39;user&#39;</span><span class="hl-1"> }) {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">id</span><span class="hl-1"> = </span><span class="hl-2">crypto</span><span class="hl-1">.</span><span class="hl-6">randomUUID</span><span class="hl-1">()</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">user</span><span class="hl-1">: </span><span class="hl-5">User</span><span class="hl-1"> = {</span><br/><span class="hl-1">      </span><span class="hl-2">name:</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">email:</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">email</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">role:</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">role</span><span class="hl-1"> ?? </span><span class="hl-3">&#39;user&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">active:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">,</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-7">// CDC event emitted automatically</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">users</span><span class="hl-1">.</span><span class="hl-6">put</span><span class="hl-1">(</span><span class="hl-2">id</span><span class="hl-1">, </span><span class="hl-2">user</span><span class="hl-1">)</span><br/><br/><span class="hl-1">    </span><span class="hl-7">// Emit custom business event</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">events</span><span class="hl-1">.</span><span class="hl-6">emit</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;user.registered&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">userId:</span><span class="hl-1"> </span><span class="hl-2">id</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">email:</span><span class="hl-1"> </span><span class="hl-2">user</span><span class="hl-1">.</span><span class="hl-2">email</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">role:</span><span class="hl-1"> </span><span class="hl-2">user</span><span class="hl-1">.</span><span class="hl-2">role</span><span class="hl-1">,</span><br/><span class="hl-1">    })</span><br/><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">user</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-6">updateUserRole</span><span class="hl-1">(</span><span class="hl-2">userId</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">, </span><span class="hl-2">role</span><span class="hl-1">: </span><span class="hl-3">&#39;admin&#39;</span><span class="hl-1"> | </span><span class="hl-3">&#39;user&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-8">user</span><span class="hl-1"> = </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">users</span><span class="hl-1">.</span><span class="hl-6">get</span><span class="hl-1">(</span><span class="hl-2">userId</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-2">user</span><span class="hl-1">) </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">null</span><br/><br/><span class="hl-1">    </span><span class="hl-7">// CDC update event with previous doc included</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">users</span><span class="hl-1">.</span><span class="hl-6">put</span><span class="hl-1">(</span><span class="hl-2">userId</span><span class="hl-1">, { ...</span><span class="hl-2">user</span><span class="hl-1">, </span><span class="hl-2">role</span><span class="hl-1"> })</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> { ...</span><span class="hl-2">user</span><span class="hl-1">, </span><span class="hl-2">role</span><span class="hl-1"> }</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// Required: forward alarm to event emitter</span><br/><span class="hl-1">  </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-6">alarm</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">events</span><span class="hl-1">.</span><span class="hl-6">handleAlarm</span><span class="hl-1">()</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// Enrich events with request context</span><br/><span class="hl-1">  </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-6">fetch</span><span class="hl-1">(</span><span class="hl-2">request</span><span class="hl-1">: </span><span class="hl-5">Request</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">events</span><span class="hl-1">.</span><span class="hl-6">enrichFromRequest</span><span class="hl-1">(</span><span class="hl-2">request</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">super</span><span class="hl-1">.</span><span class="hl-6">fetch</span><span class="hl-1">(</span><span class="hl-2">request</span><span class="hl-1">)</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// Persist batch before hibernation</span><br/><span class="hl-1">  </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-6">webSocketClose</span><span class="hl-1">(</span><span class="hl-2">ws</span><span class="hl-1">: </span><span class="hl-5">WebSocket</span><span class="hl-1">, </span><span class="hl-2">code</span><span class="hl-1">: </span><span class="hl-5">number</span><span class="hl-1">, </span><span class="hl-2">reason</span><span class="hl-1">: </span><span class="hl-5">string</span><span class="hl-1">, </span><span class="hl-2">wasClean</span><span class="hl-1">: </span><span class="hl-5">boolean</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-4">this</span><span class="hl-1">.</span><span class="hl-2">events</span><span class="hl-1">.</span><span class="hl-6">persistBatch</span><span class="hl-1">()</span><br/><span class="hl-1">    </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-4">super</span><span class="hl-1">.</span><span class="hl-6">webSocketClose</span><span class="hl-1">(</span><span class="hl-2">ws</span><span class="hl-1">, </span><span class="hl-2">code</span><span class="hl-1">, </span><span class="hl-2">reason</span><span class="hl-1">, </span><span class="hl-2">wasClean</span><span class="hl-1">)</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="architecture" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Architecture<a href="#architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code><span class="hl-1">+----------------+     +------------------+     +------------------+</span><br/><span class="hl-1">|  </span><span class="hl-2">Durable</span><span class="hl-1">       |     |                  |     |                  |</span><br/><span class="hl-1">|  </span><span class="hl-2">Object</span><span class="hl-1">        | --&gt; |  </span><span class="hl-2">EventEmitter</span><span class="hl-1">    | --&gt; |  </span><span class="hl-2">events</span><span class="hl-1">.</span><span class="hl-2">do</span><span class="hl-1">       |</span><br/><span class="hl-1">|                |     |  (</span><span class="hl-2">batching</span><span class="hl-1">)      |     |  (</span><span class="hl-2">ingestion</span><span class="hl-1">)     |</span><br/><span class="hl-1">+----------------+     +------------------+     +------------------+</span><br/><span class="hl-1">       |                       |                        |</span><br/><span class="hl-1">       |                       </span><span class="hl-2">v</span><span class="hl-1">                        </span><span class="hl-2">v</span><br/><span class="hl-1">       |               +------------------+     +------------------+</span><br/><span class="hl-1">       |               |  </span><span class="hl-8">R2</span><span class="hl-1"> </span><span class="hl-2">Bucket</span><span class="hl-1">       |     |  </span><span class="hl-2">Analytics</span><span class="hl-1">       |</span><br/><span class="hl-1">       |               |  (</span><span class="hl-2">lakehouse</span><span class="hl-1">)     | &lt;-- |  (</span><span class="hl-5">DuckDB</span><span class="hl-1">)        |</span><br/><span class="hl-1">       |               +------------------+     +------------------+</span><br/><span class="hl-1">       </span><span class="hl-5">v</span><br/><span class="hl-1">+------------------+</span><br/><span class="hl-1">|  </span><span class="hl-5">SQLite</span><span class="hl-1">          |</span><br/><span class="hl-1">|  (</span><span class="hl-5">bookmarks</span><span class="hl-1">)     |</span><br/><span class="hl-1">+------------------+</span>
</code><button>Copy</button></pre>

<a id="data-flow" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Data Flow<a href="#data-flow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li><strong>Event Emission</strong>: Your DO emits events via <code>EventEmitter.emit()</code> or CDC wrapper mutations</li>
<li><strong>Batching</strong>: Events are batched in memory (configurable size/interval)</li>
<li><strong>Streaming</strong>: Batches are sent to <a href="http://events.do">events.do</a> for real-time processing</li>
<li><strong>Lakehouse</strong>: Optionally, events stream to R2 in time-partitioned JSON Lines format</li>
<li><strong>PITR</strong>: CDC events include SQLite bookmarks for point-in-time recovery</li>
<li><strong>Analytics</strong>: Query events with DuckDB using generated queries</li>
</ol>
<a id="r2-storage-format" class="tsd-anchor"></a><h3 class="tsd-anchor-link">R2 Storage Format<a href="#r2-storage-format" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Events are stored in R2 with the following path structure:</p>
<pre><code><span class="hl-2">events</span><span class="hl-1">/{</span><span class="hl-2">year</span><span class="hl-1">}/{</span><span class="hl-2">month</span><span class="hl-1">}/{</span><span class="hl-2">day</span><span class="hl-1">}/{</span><span class="hl-2">hour</span><span class="hl-1">}/{</span><span class="hl-2">do_id</span><span class="hl-1">}</span><span class="hl-2">_</span><span class="hl-1">{</span><span class="hl-2">timestamp</span><span class="hl-1">}.</span><span class="hl-2">jsonl</span>
</code><button>Copy</button></pre>

<p>Example:</p>
<pre><code><span class="hl-2">events</span><span class="hl-1">/</span><span class="hl-9">2024</span><span class="hl-1">/</span><span class="hl-9">01</span><span class="hl-1">/</span><span class="hl-9">15</span><span class="hl-1">/</span><span class="hl-9">14</span><span class="hl-1">/</span><span class="hl-2">abc123_1705329600000</span><span class="hl-1">.</span><span class="hl-2">jsonl</span>
</code><button>Copy</button></pre>

<p>This format is optimized for:</p>
<ul>
<li>Time-based partitioning (efficient date range queries)</li>
<li>Parquet conversion (compatible with lakehouse tools)</li>
<li>DuckDB glob patterns</li>
</ul>
<a id="license" class="tsd-anchor"></a><h2 class="tsd-anchor-link">License<a href="#license" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>MIT</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#dotdoevents"><span>@dotdo/events</span></a><ul><li><a href="#installation"><span>Installation</span></a></li><li><a href="#quick-start"><span>Quick <wbr/>Start</span></a></li><li><a href="#features"><span>Features</span></a></li><li><a href="#api-reference"><span>API <wbr/>Reference</span></a></li><li><ul><li><a href="#eventemitter-1"><span>Event<wbr/>Emitter</span></a></li><li><ul><li><a href="#constructor"><span>Constructor</span></a></li><li><a href="#methods"><span>Methods</span></a></li><li><a href="#properties"><span>Properties</span></a></li><li><a href="#example"><span>Example</span></a></li></ul></li><li><a href="#cdccollection-1"><span>CDCCollection</span></a></li><li><ul><li><a href="#constructor-1"><span>Constructor</span></a></li><li><a href="#methods-1"><span>Methods</span></a></li><li><a href="#example-1"><span>Example</span></a></li></ul></li><li><a href="#event-types"><span>Event <wbr/>Types</span></a></li><li><ul><li><a href="#durableevent-union-type"><span>Durable<wbr/>Event (<wbr/>Union <wbr/>Type)</span></a></li><li><a href="#event-type-reference"><span>Event <wbr/>Type <wbr/>Reference</span></a></li></ul></li><li><a href="#query-builders"><span>Query <wbr/>Builders</span></a></li><li><ul><li><a href="#buildqueryoptions"><span>build<wbr/>Query(options)</span></a></li><li><a href="#buildhistoryqueryoptions"><span>build<wbr/>History<wbr/>Query(options)</span></a></li><li><a href="#buildlatencyqueryoptions"><span>build<wbr/>Latency<wbr/>Query(options)</span></a></li><li><a href="#buildpitrrangequeryoptions"><span>buildPITRRange<wbr/>Query(options)</span></a></li></ul></li><li><a href="#snapshot-utilities"><span>Snapshot <wbr/>Utilities</span></a></li><li><ul><li><a href="#createsnapshotsql-doid-options"><span>create<wbr/>Snapshot(sql, do<wbr/>Id, options)</span></a></li><li><a href="#restoresnapshotsql-bucket-snapshotkey"><span>restore<wbr/>Snapshot(sql, bucket, snapshot<wbr/>Key)</span></a></li><li><a href="#listsnapshotsbucket-doid-options"><span>list<wbr/>Snapshots(bucket, do<wbr/>Id, options?)</span></a></li><li><a href="#deletesnapshotbucket-snapshotkey"><span>delete<wbr/>Snapshot(bucket, snapshot<wbr/>Key)</span></a></li></ul></li></ul></li><li><a href="#configuration-options"><span>Configuration <wbr/>Options</span></a></li><li><a href="#integration-with-dotdorpc"><span>Integration with @dotdo/rpc</span></a></li><li><a href="#architecture"><span>Architecture</span></a></li><li><ul><li><a href="#data-flow"><span>Data <wbr/>Flow</span></a></li><li><a href="#r2-storage-format"><span>R2 <wbr/>Storage <wbr/>Format</span></a></li></ul></li><li><a href="#license"><span>License</span></a></li></ul></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/dot-do/events" class="tsd-nav-link">GitHub</a><a href="https://events.do" class="tsd-nav-link">Website</a></nav><nav class="tsd-navigation"><a href="modules.html">@dotdo/events - v0.1.0</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
